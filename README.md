

# AI-Stock-Agent: 基于 DeepSeek 驱动的 A 股自进化量化选股系统

## 🚀 项目简介

本项目是一款融合了 **DeepSeek 大语言模型** 增强能力的 A 股短线交易智能化工具。
不同于传统的静态量化策略，本项目核心在于**“AI 驱动的策略迭代”**：系统通过 DeepSeek 实时分析盘面特征，动态调整因子权重。它能像人类交易员一样，在“趋势市”中调高动能因子，在“震荡市”中调高技术支撑因子，从而实现选股逻辑的每日进化。

---

## 🧠 AI 选股的核心意义：从“静态”到“自进化”

传统量化程序往往面临“参数失效”的问题（即一套参数跑几个月就亏钱）。本项目通过 DeepSeek 解决了这一痛点：

1. **动态权重分配**：DeepSeek 会根据每日强势股的共同特征，重新分配“涨幅、成交量、均线、RSI”等因子的权重。
2. **盘面复盘逻辑**：DeepSeek 不仅是选股，更是在复盘。它能识别当前市场是偏向“放量突破”还是“缩量回调”。
3. **零代码迭代**：你无需手动修改代码参数，DeepSeek 会自动更新 `factor_weights.json` 配置文件。

---

## 📂 模块说明

| 文件名 | 职能描述 | 核心逻辑 |
| --- | --- | --- |
| `config.py` | **系统指挥部** | 定义 DeepSeek API Key、选股市值门槛（默认 50 亿）、成交量要求及持久化路径。 |
| `llm_client.py` | **AI 大脑** | 封装 DeepSeek 标准接口，负责接收市场数据并输出经过逻辑推理的 JSON 权重配置。 |
| `trading_signal.py` | **数据引擎** | 基于 `akshare` 抓取行情，计算 MA、RSI、支撑位/阻力位等核心技术指标。 |
| `auto_strategy_optimizer.py` | **自动化主流程** | 执行“全场扫描 -> 因子打分 -> 产生 TOP5 建议 -> 触发 AI 进化”的闭环任务。 |
| `executor.py` | **执行工具** | 将复杂的信号日志转化为人类可读的“实盘操作建议”表格。 |
| `explainer.py` | **报告生成器** | 调用 LLM 生成详细的策略日报（.md 格式），解释为何选中这些股票。 |
| `main.py` | **单股诊断器** | 提供命令行交互，输入股票代码即可获取 DeepSeek 生成的深度诊断报告。 |

---

## 🛠️ 环境准备与安装

### 1. 基础环境

* **操作系统**: macOS (已适配 13.x+) / Windows / Linux
* **Python**: 3.9 或更高版本

### 2. 获取 DeepSeek API

访问 [DeepSeek 开放平台](https://platform.deepseek.com/) 注册并获取 `API_KEY`。

### 3. 安装依赖

```bash
# 克隆项目 (假设你已上传)
cd cn-stock-AI-agent

# 安装核心依赖
pip install -r requirements.txt

```

---

## 运行指南

### 第一步：配置 API

编辑 `config.py` 文件，填入你的 DeepSeek Key：

```python
LLM_CONFIG = {
    "api_url": "https://api.deepseek.com/chat/completions",
    "api_key": "你的_DEEPSEEK_API_KEY", # <--- 填入此处
    "model_name": "deepseek-chat",
    "temperature": 0.2,
}

```

### 第二步：运行每日选股与策略进化

系统将自动扫描全市场，筛选 TOP 5 潜力股，并让 DeepSeek 根据今日盘面调整明天的因子权重。

```bash
python3 auto_strategy_optimizer.py

```

### 第三步：获取单只股票 AI 深度诊断

如果你有心仪的股票，想看看 AI 的专业意见：

```bash
python3 main.py --code 600519

```

---

## 📊 运行结果输出说明

项目运行后，会在 `strategy_log/` 目录下生成以下资产：

1. **`factor_weights.json`**: 被 DeepSeek 动态修改后的最新因子权重。
2. **`trading_signals_log.csv`**: 每日产生的交易信号，包含买入区间、止损价、目标价。
3. **`daily_report_YYYY-MM-DD.md`**: AI 生成的策略日报，包含市场风格判断与风险提示。
4. **终端输出**: 直接展示格式化的实操表格（如下所示）。

**示例输出表格：**

```text
★ ★ ★ ★ ★ ★ ★ ★ ★ ★ ★ ★ ★ ★ ★ ★ ★ ★ ★ ★ 今日推荐操作 ★ ★ ★ ★ ★ ★ ★ ★ ★ ★ ★ ★ ★ ★ ★ ★ ★ ★ ★ ★
股票名称     代码      综合评分   建议买入区间        止损位     建议仓位
--------------------------------------------------------------------------------------------
贵州茅台     600519    88.5      1580.5-1620.0      1533.0     14%
宁德时代     300750    85.2      185.0-192.5        179.45     14%
...
🧠 DeepSeek 正在复盘今日风格并优化策略...
✅ 策略进化完成，明日权重将向“成交量放大”倾斜。

```

---

## 🌟 亮点功能总结

* **真正的 AI 闭环**：不仅仅是用 LLM 读新闻，而是让 LLM 参与量化核心因子的权重分配。
* **低门槛实操**：不需要复杂的本地模型部署，直接通过在线 API 实现最强 LLM 的量化赋能。
* **抗风险设计**：所有 AI 建议均基于严格的技术指标（支撑位/止损位）计算，确保交易逻辑在可控范围内。

---

## ⚠️ 免责声明

本工具仅用于量化交易研究与辅助选股，不构成任何投资建议。股市有风险，入市需谨慎。

---
